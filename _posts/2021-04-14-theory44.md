---
layout: post
categories: [theory]
comments: true
title: "이상/함수적 종속"
date: 2021-04-14 14:15:23
typora-copy-images-to: upload

---

#### 1. 이상(Anomaly)

- 테이블에서 일부 속성들의 종속으로 인해 데이터의 중복이 발생하고, 이 중복으로 인해 테이블 조작 시 문제가 발생하는 현상을 의미함
- 이상의 종류에는 테이블 조작 중에 발생하는 **삽입 이상, 삭제 이상, 갱신 이상**이 있음

<img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs49gxh7vbj30ry0qgnpd.jpg" alt="스크린샷 2021-07-04 오전 2.11.48" style="zoom:50%;" />

- 삽입 이상(Insertion Anomaly): 테이블에 데이터를 삽입할 때 의도와는 상관 없이 원하지 않은 값들로 인해 삽입할 수 없게 되는 상황

  > <수강> 테이블에서 학번이 "600"인 학생의 학년이 "2"라는 사실만을 삽입하고자 하는 경우, 삽입 이상이 발생한다.
  > -> 수강 테이블의 기본키는 학번과 과목번호이기 때문에 삽입할 때 반드시 과목번호가 있어야 한다. 즉, 데이터가 발생되는 시점에는 과목번호가 필요 없지만 <수강> 테이블에 기록하고자 할 때 과목번호가 없어 등록할 수 없는 경우가 발생한다.

- 삭제 이상(Deletion Anomaly): 테이블에서 한 튜플을 삭제할 때 의도하는 상관없는 값들도 함께 삭제되는, 즉 연쇄 삭제가 발생하는 현상임

  > <수강> 테이블에서 학번이 "200"인 학생이 과목번호 "C123"의 등록을 취소하고자 하는 경우 삭제 이상이 발생한다.
  >
  > 학번이 "200"인 학생의 과목번호가 "C123"인 과목을 취소하고자 그 학생의 튜플을 삭제하면 학년 정보까지 같이 삭제된다. 과목만을 취소하고자 했지만 유지되어야 할 학년 정보까지 삭제되기 때문에 정보 손실이 발생한다.

- 갱신 이상(Update Anomaly): 테이블에서 튜플에 있는 속성의 값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에 불일치성이 생기는 현상임

  > <수강> 테이블에서 학번이 "400"인 학생의 학년을 "4"에서 "3"으로 변경하고자 하는 경우 갱신 이상이 발생할 수 있다.
  >
  > 학번이 "400"인 모든 튜플의 학년 값을 갱신해야 하는데 실수로 일부 튜플만 갱신하면, 학번이 "400"인 학생의 학년은 "3"과 "4" 즉 2가지 값을 가지게 되어 정보에 불일치성이 생기게 됨

#### 2. 함수적 종속(Functional Dependency)

- 어떤 테이블 R에서 X와 Y를 각각 R의 속성 집합의 부분 집합이라 하자. 속성 X의 값 각각에 대해 시간에 관계없이 항상 속성 Y의 값이 오직 하나만 연관되어 있을 때 Y는 X에 함수적 종속 또는 X가 Y를 함수적으로 결정한다고 하고, X->Y로 표기한다.
- 함수적 종속은 데이터의 의미를 표현하는 것으로, 현실 세계를 표현하는 제약 조건이 되는 동시에 데이터베이스에서 항상 유지되어야 할 조건이다.

> 다음의 <학생> 테이블에서 함수적 종속을 살펴보자.
>
> <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs4w13cauzj30rk0dke2k.jpg" alt="스크린샷 2021-07-04 오후 3.12.18" style="zoom:33%;" />
>
> <학생> 테이블에서 이름, 학년, 학과는 각각 학번 속성에 함수적 종속임. 이것을 기호로 표시하면 다음과 같음
>
> - 학번->이름, 학년, 학과
>
> - X->Y의 관계를 갖는 속성 X와 Y에서  X를 결정자라 하고, Y를 종속자라고 함. 예를 들어 학번->이름에서는 학번이 결정자이고, 이름이 종속자임
>
> 다음의 <수강> 테이블에서 함수적 종속을 기호로 표시해 보자.
>
> <img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs4w56ydu2j30pi0q8hdt.jpg" alt="스크린샷 2021-07-04 오후 3.16.19" style="zoom:33%;" />
>
> - 학번, 과목번호->성적
>
> - 학번->학년
>
> - <수강> 테이블의 속성 중 성적은 (학번, 과목번호)에 완전 함수적 종속이라고 함
> - 반면에 <수강> 테이블의 속성 중 학년은 (학번, 과목번호)에 완전 함수적 종속이 아니므로 부분 함수적 종속이라고 함

*완전 함수적 종속

어떤 테이블 R에서 속성 Y가 다른 속성 집합 X 전체에 대해 함수적 종속이면서 속성 집합 X의 어떠한 진부분 집합 Z에도 함수적 종속이 아닐 때 속성 Y는 속성 집합 X에 완전 함수적 종속이라고 함

*부분 함수적 종속

어떤 테이블 R에서 속성 Y가 다른 속성 집합 X 전체에 대해 함수적 종속이면서 속성 집합 X의 임의의 진부분 집합에 대해 함수적 종속일 때, 속성 Y는 속성 집합 X에 부분 함수적 종속이라고 함

*완전/부분적 함수 종속의 이해

완전 함수적 종속이라는 말은 어떤 속성이 기본키에 대해 완전히 종속적일 때를 말함. 예를 들어 <수강> 테이블은 (학번, 과목번호)가 기본키인데, 성적은 학번과 과목번호가 같을 경우에는 항상 같은 성적이 오므로, 즉 성적은 학번과 과목번호에 의해서만 결정되므로 성적은 기본키(학번, 과목번호)에 완전 함수적 종속이 되는 것임. 반면에 학년은 과목번호에 관계없이 학번이 같으면 항상 같은 학년이 오므로, 즉 기본키의 일부인 학번에 의해서 학년이 결정되므로 학년은 부분 함수적 종속이라고 함.

